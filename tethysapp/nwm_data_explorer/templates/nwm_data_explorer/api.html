{% extends "nwm_data_explorer/base.html" %}
{% load staticfiles %}

{% block app_content %}
    <h1>Developers API</h1>
    <p>
        A Developers API is provided for those who wish to incorporate the National Water Model data into their own
        separate application or script.
    </p>
    <p>The API endpoint is the current URL, <b>https://appsdev.hydroshare.org/apps/nwm-data-explorer/api</b></p>
    <h2>API Methods</h2>
    <p>All API methods must be called using the following pattern:</p>
    <p><b>endpoint/method/?param1=value1&#38;param2=value2&#38;...paramN=valueN</b></p>
    <p>Note: The presence of parameter key/value pairs depends on the method. See specific examples for each method below.</p>
    <h3>GetFileList</h3>
    <table>
        <tr>
            <td><b>Supported Methods</b></td>
            <td colspan="5">GET</td>
        </tr>
        <tr>
            <td><b>Returns</b></td>
            <td colspan="5">A list of all available files in the NWM subset defined by the specified parameters</td>
        </tr>
        <tr>
            <td rowspan="5"><b>Params</b></td>
            <td><b>Name</b></td>
            <td><b>Description</b></td>
            <td><b>Valid Values</b></td>
            <td><b>Required</b></td>
            <td><b>Default if omitted</td>
        </tr>
        <tr>
            <td>config</td>
            <td>The configuration of the files.</td>
            <td>One of the following strings: "short_range", "long_range", "medium_range", or "analysis_assim"</td>
            <td>Yes</td>
            <td>Cannot be ommitted</td>
        </tr>
        <tr>
            <td>startDate</td>
            <td>The date on which the forecast was initialized</td>
            <td>A string of the form "YYYY-MM-DD"</td>
            <td>Yes</td>
            <td>Cannot be omitted</td>
        </tr>
        <tr>
            <td>time</td>
            <td>The time at which the forecast is initialized at</td>
            <td>Comma-separated integers from 0 to 23, or a dash-separated range of values from 0 to 23</td>
            <td>No</td>
            <td>"0-23" or all possible initialization times</td>
        </tr>
        <tr>
            <td>type</td>
            <td>The type of data the file corresponds to</td>
            <td>One of the following strings: "land", "terrain", "channel", or "reservoir"</td>
            <td>No</td>
            <td>All types</td>
        </tr>
    </table>
    <br>
    <h5>Example:</h5>
    <a href="https://appsdev.hydroshare.org/apps/nwm-data-explorer/api/GetFileList/?config=short_range&startDate=2016-06-01&time=2,3&type=terrain" target="_blank">
        <code>https://appsdev.hydroshare.org/apps/nwm-data-explorer/api/GetFileList/?config=short_range&startDate=2016-06-01&time=2,3&type=terrain</code>
    </a>
    <br><br>

    <h3>GetFileMetadata</h3>
    <table>
        <tr>
            <th>Supported Methods</th>
            <td>GET</td>
        </tr>
        <tr>
            <th>Returns</th>
            <td>Key/value pairs representing all of the available metadata for the specified file</td>
        </tr>
        <tr>
            <th>Params</th>
            <td>filename (the name of the file of interest, as it appears in the GetFileList result)</td>
        </tr>
    </table>
    <br>
    <h5>Example:</h5>
    <a href="https://appsdev.hydroshare.org/apps/nwm-data-explorer/api/GetFileMetadata?filename=short_range/20160601/nwm.t02z.short_range.terrain_rt.f001.conus.nc_georeferenced.nc" target="_blank">
        <code>https://appsdev.hydroshare.org/apps/nwm-data-explorer/api/GetFileMetadata?filename=short_range/20160601/nwm.t02z.short_range.terrain_rt.f001.conus.nc_georeferenced.nc</code>
    </a>
    <br><br>

    <h3>GetFile</h3>
    <table>
        <tr>
            <th>Supported Methods</th>
            <td>GET</td>
        </tr>
        <tr>
            <th>Returns</th>
            <td>A streaming download of the specified file</td>
        </tr>
        <tr>
            <th>Params</th>
            <td>filename (the name of the file of interest, as it appears in the GetFileList result)</td>
        </tr>
    </table>
    <br>
    <h5>Example:</h5>
    <a href="https://appsdev.hydroshare.org/apps/nwm-data-explorer/api/GetFile?filename=short_range/20160601/nwm.t02z.short_range.terrain_rt.f001.conus.nc_georeferenced.nc" target="_blank">
        <code>https://appsdev.hydroshare.org/apps/nwm-data-explorer/api/GetFile?filename=short_range/20160601/nwm.t02z.short_range.terrain_rt.f001.conus.nc_georeferenced.nc</code>
    </a>
{% endblock %}

{% block content_dependent_styles %}
    {{ block.super }}
    <link href="{% static 'nwm_data_explorer/css/api.css' %}" rel="stylesheet"/>
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script src="{% static 'nwm_data_explorer/js/api.js' %}" type="text/javascript"></script>
{% endblock %}